{
  "name": "ethereumjs-vm",
  "version": "0.1.6",
  "description": "an ethereum VM implementation",
  "main": "index.js",
  "dependencies": {
    "async": "^1.4.2",
    "async-eventemitter": "^0.2.2",
    "bn.js": "^3.1.2",
    "es6-shim": "^0.33.6",
    "ethereum-common": "0.0.10",
    "ethereumjs-account": "1.0.3",
    "ethereumjs-block": "1.0.0",
    "ethereumjs-util": "^2.0.1",
    "functional-red-black-tree": "^1.0.1",
    "history-tree": "^2.0.0",
    "merkle-patricia-tree": "^2.0.3",
    "rlp": "^2.0.0",
    "secp256k1": "1.1.4",
    "secp256k1-browserify": "0.0.0"
  },
  "devDependencies": {
    "ethereumjs-blockchain": "1.2.1",
    "ethereumjs-testing": "git+https://github.com/wanderer/ethereumjs-testing.git",
    "ethereumjs-tx": "^0.6.7",
    "level": "^1.3.0",
    "leveldown": "^1.4.1",
    "levelup": "^1.2.1",
    "memdown": "^1.0.0",
    "minimist": "^1.1.1",
    "sha3": "^1.2.0",
    "standard": "^5.2.2",
    "tape": "^4.2.0",
    "through2": "^2.0.0"
  },
  "scripts": {
    "build": "browserify --s EthVm index.js > ./dist/ethereumjs-vm.js",
    "test": "standard *js && ./tests/tester -a"
  },
  "repository": {
    "type": "git",
    "url": "git+https://github.com/ethereum/ethereumjs-vm.git"
  },
  "keywords": [
    "ethereum",
    "VM"
  ],
  "author": {
    "name": "mjbecze",
    "email": "mjbecze@gmail.com"
  },
  "license": "MPL-2.0",
  "bugs": {
    "url": "https://github.com/ethereum/ethereumjs-vm/issues"
  },
  "homepage": "https://github.com/ethereum/ethereumjs-vm",
  "browser": {
    "secp256k1": "secp256k1-browserify"
  },
  "readme": "SYNOPSIS [![Build Status](https://travis-ci.org/ethereum/ethereumjs-vm.svg?branch=master)](https://travis-ci.org/ethereum/ethereumjs-vm)\n===========\nImplements Ethereum's VM in JS\n\n# CONTACT\n[![Gitter](https://badges.gitter.im/Join%20Chat.svg)](https://gitter.im/ethereum/ethereumjs-lib?utm_source=badge&utm_medium=badge&utm_campaign=pr-badge) or #ethereumjs on freenode\n\n# INSTALL\n`npm install ethereumjs-vm`\n\n# USAGE\n```javascript\nvar VM = require('ethereumjs-vm')\n\n//create a new VM instance\nvar vm = new VM()\nvar code = '7f4e616d65526567000000000000000000000000000000000000000000000000003055307f4e616d6552656700000000000000000000000000000000000000000000000000557f436f6e666967000000000000000000000000000000000000000000000000000073661005d2720d855f1d9976f88bb10c1a3398c77f5573661005d2720d855f1d9976f88bb10c1a3398c77f7f436f6e6669670000000000000000000000000000000000000000000000000000553360455560df806100c56000396000f3007f726567697374657200000000000000000000000000000000000000000000000060003514156053576020355415603257005b335415603e5760003354555b6020353360006000a233602035556020353355005b60007f756e72656769737465720000000000000000000000000000000000000000000060003514156082575033545b1560995733335460006000a2600033545560003355005b60007f6b696c6c00000000000000000000000000000000000000000000000000000000600035141560cb575060455433145b1560d25733ff5b6000355460005260206000f3'\n//code needs tobe a buffer\ncode = new Buffer(code, 'hex')\n\nvm.runCode({\n  code: code,\n  gasLimit: new Buffer('ffffffff', 'hex') \n}, function(err, results){\n  console.log('returned: ' + results.return.toString('hex'));\n})\n```\nAlso more exmaples can be found here  \n- [examples](./examples)\n- [old blog post](https://wanderer.github.io/ethereum/nodejs/code/2014/08/12/running-contracts-with-vm/)\n\n# BOWSER  \nTo build for standalone use in the browser install `browserify` and run `npm run build`. This will give you a gobal varible `EthVM` to use. The standalone file will be at `./dist/ethereumjs-vm.js`\n\n# API\n  - [`new VM([StateTrie], [blockchain])`](#new-vmstatetrie-blockchain)  \n  - [`VM` methods](#vm-methods)  \n    - [`vm.runBlockchain([blockchain], [cb])`](#vmrunblockchainblockchain-cb)\n    - [`vm.runBlock(opts, cb)`](#vmrunblockopts-cb)\n    - [`vm.runTx(opts, cb)`](#vmruntxopts-cb)\n    - [`vm.runCode(opts, cb)`](#vmruncodeopts-cb)\n    - [`vm.generateCanonicalGenesis(cb)`](#vmgeneratecanonicalgenesiscb)\n    - [`vm.generateGenesis(cb)`](#vmgenerategenesiscb)\n    - [`vm.createTraceReadStream()`](#vmcreatetracereadstream)\n    - [`vm.loadCompiled(address, src, cb)`](#vmloadcompiledaddress-src-cb)\n  - [`VM` debugging hooks](#vm-debugging-hooks)\n    - [`vm.onStep`](#vmonstep)\n\n### `new VM([StateTrie], [blockchain])`\nCreates a new VM object\n- `StateTrie` - The [Patricia Merkle Tree](https://github.com/wanderer/merkle-patricia-tree) that contains the state if no trie is given the `VM` will create an in memory trie\n- `blockchain` - an instance of the [`Blockchain`](https://github.com/ethereum/ethereumjs-lib/blob/master/docs/blockchain.md) If no blockchain is given a fake blockchain will be used.\n\n### `VM` methods\n\n\n#### `vm.runBlockchain(blockchain, cb)`\nProcess a transaction.\n- `blockchain` - A [blockchain](https://github.com/ethereum/ethereumjs-blockchain) that to process\n- `cb` - The callback. Its is given an err parameter if it fails\n\n--------------------------------------------------------\n\n#### `vm.runBlock(opts, cb)`\nProcesses the `block` running all of the transaction it contains and updating the miner's account.\n- `opts.block` - The [`Block`](./block.md) to process\n- `opts.generate` - a `Boolean`; whether to generate the stateRoot. If false  `runBlock` will check the stateRoot of the block against the Trie\n- `cb` - The callback\n\n--------------------------------------------------------\n\n\n#### `vm.runTx(opts, cb)`\nProcess a transaction.\n- `opts.tx` - A [`Transaction`](https://github.com/ethereum/ethereumjs-tx) to run.\n- `opts.block` - The block to which the `tx` belongs. If omited a blank block will be used.\n- `cb` - The callback. It is given two arguments, an `error` string containing an error that may have happened or `null`, and a `results` object with the following propieties:\n  - `amountSpent` - the amount of ether used by this transaction as a `bignum`\n  - `vm` - contains the results from running the code, if any, as described in [`vm.runCode(params, cb)`](#vmruncodeopts-cb)\n\n--------------------------------------------------------\n\n#### `vm.runCode(opts, cb)`\nRuns EVM code\n- `opts.code` - The EVM code to run given as a `Buffer`\n- `opts.data` - The input data given as a `Buffer`\n- `opts.value` - The value in ether that is being sent to `opt.address`. Defaults to `0`\n- `opts.block` - The [`Block`](./block.md) the `tx` belongs to. If omited a blank block will be used.\n- `opts.gasLimit` - The gas limit for the code given as an `Buffer`\n- `opts.account` - The [`Account`](./account.md) that the executing code belongs to. If omited an empty account will be used\n- `opts.address` - The address of the account that is executing this code. The address should be a `Buffer` of bytes. Defaults to `0`\n- `opts.origin` - The address where the call originated from. The address should be a `Buffer` of 20bits. Defaults to `0`\n- `opts.caller` - The address that ran this code. The address should be a `Buffer` of 20bits. Defaults to `0`\n- `cb` - The callback. It is given two arguments, a `error` string containing an error that may have happen or `null` and a `results` object with the following propieties\n  - `gasUsed` - the amount of gas as a `bignum` the code used to run. \n  - `gasRefund` - a `Bignum` containting the amount of gas to refund from deleting storage values\n  - `suicide` - a `boolean`, whether the contract commited suicide\n  - `account` - account of the code that ran\n  - `expcetion` - a `boolean`, whethere or not the contract encoutered an exception\n  - `exceptionError` - a `String` describing the exception if there was one.\n  - `return` - a `Buffer` containing the value that was returned by the contract\n\n\n--------------------------------------------------------\n\n#### `vm.generateCanonicalGenesis(cb)`\nGenerates the Canonical genesis state.\n\n--------------------------------------------------------\n\n#### `vm.generateGenesis(genesisData, cb)`\nGenerate the genesis state.\n- `genesisData` - an `Object` whose keys are addresses and values are a `string`s representing initail allocation of ether.\n- `cb` - The callback\n```javascript\nvar genesisData = {\n  \"51ba59315b3a95761d0863b05ccc7a7f54703d99\": \"1606938044258990275541962092341162602522202993782792835301376\",\n  \"e4157b34ea9615cfbde6b4fda419828124b70c78\": \"1606938044258990275541962092341162602522202993782792835301376\"\n}\n\nvm.generateGenesis(genesisData, function(){\n  conosle.log('generation done');\n})\n```\n#### `vm.createTraceStream()`\nCreates a vm trace stream. The steam is an `Object` stream. The object contains\n- `step` - how many steps the current VM has taken\n- `pc` - a `Number` repersenting the program counter\n- `depth` - the current number of calls deep the contract is\n- `opcode` - the next opcode to be ran\n- `gas` - a `bignum` standing for the amount of gasLeft\n- `memory` - the memory of the VM as a `buffer`\n- `storage` - an map of key/values that are in storages \n- `address` - the address of the `account`\n- `stack` - an `Array` of `Buffers` containing the stack\n\nNOTE: using this function defines the `onStep` hook. So you can't use both at the same time.\n \n--------------------------------------------------------\n\n#### `vm.loadCompiled(address, src, cb)`\nLoads a contract defined as a stingified JS function\n- `address` - a `Buffer` containing the address of the contract\n- `src` - a `String` of a function to be run when the `address` is called\n\n### `VM` debugging hook\n\n#### `vm.onStep` \nWhen `onStep` is assigned a function the VM will run that function at the begining of each opcode. The `onStep` function is give an `Object` and `done`. `done` must be called before the VM contunies. The `Object` has the following propieties.\n- `pc` - a `Number` repersenting the program counter\n- `opcode` - the next opcode to be ran\n- `gas` - a `bignum` standing for the amount of gasLeft\n- `stack` - an `Array` of `Buffers` containing the stack. \n- `storageTrie` - the storage [trie](https://github.com/wanderer/merkle-patricia-tree) for the account\n- `account` - the [`Account`](https://github.com/ethereum/ethereumjs-account) which owns the code running.\n- `address` - the address of the `account`\n- `depth` - the current number of calls deep the contract is\n- `memory` - the memory of the VM as a `buffer`\n\n# TESTING\n`npm test`  \nif you want to just run the VM tests run\n`./bin/tester -v`\nif you want to just run the State tests run\n`./bin/tester -s`\n\n# Internal Structure\nThe VM processes state changes at many levels.\n\n* runBlockchain\n  * for every block, runBlock\n* runBlock\n  * for every tx, runTx\n  * pay miner and uncles\n* runTx\n  * checkpoint state\n  * runCall\n  * revert or commit checkpoint\n* runCall\n  * transfer value\n  * load code\n  * runCode\n  * materialize created contracts\n* runCode\n  * iterrate over code\n  * run op codes\n  * track gas usage\n* OpFns\n  * run individual op code\n  * modify stack\n  * modify memory\n  * calculate fee\n\nThe opFns for `CREATE`, `CALL`, and `CALLCODE` call back up to `runCall`.\n\n\n# LICENSE\n[MPL-2.0](https://www.mozilla.org/MPL/2.0/)\n",
  "readmeFilename": "README.md",
  "_id": "ethereumjs-vm@0.1.6",
  "_from": "ethereumjs-vm@0.1.6"
}
